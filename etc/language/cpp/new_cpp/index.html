<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../../img/favicon.ico">
        <title>New c++11 standard - Logic's home</title>
        <link href="../../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-135539521-1', 'resoliwan.github.io');
            ga('send', 'pageview');
        </script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../../..">Logic's home</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../../..">README.md</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Agile <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../../agile/scrum_1/">스크럼을 사용한 애자일 소프트웨어 개발 방법론1</a>
</li>
                                    
<li >
    <a href="../../../../agile/scrum_2/">2. 스크럼 준비</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dl <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../../dl/1_dl_introduction/">1. Introduction to Introduction to Machine Learning Based AI</a>
</li>
                                    
<li >
    <a href="../../../../dl/2_dl_tensorflow/">2. Introduction to TensorFlow</a>
</li>
                                    
<li >
    <a href="../../../../dl/3_dl_1_mnist/">3.1 MNIST</a>
</li>
                                    
<li >
    <a href="../../../../dl/3_dl_neural_net/">3. Neural Networks Foundations</a>
</li>
                                    
<li >
    <a href="../../../../dl/4_dl_beyond_image/">4. Beyond Image Recognition, End-to-End Learning, Embeddings</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Etc <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">Algorithm</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../algorithm/en_2_getting_started/">2.Getting Started</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Android</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Googleplay</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../android/googleplay/googleplay_billing/">Google Play Billing</a>
</li>
            
<li >
    <a href="../../../android/googleplay/googleplay_billing_library/">Google Play Billing Library</a>
</li>
            
<li >
    <a href="../../../android/googleplay/overview/">Overview</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Publish</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../android/publish/1_publish_overview/">Publish your app</a>
</li>
            
<li >
    <a href="../../../android/publish/2_prepare_for_release/">Prepare for release</a>
</li>
            
<li >
    <a href="../../../android/publish/3_version/">Version your app</a>
</li>
            
<li >
    <a href="../../../android/publish/4_sign/">Sign your app</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Books</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../books/2018_12_lovethatdog/">Love that dog</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Idea</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../idea/launcher/">Luncher App</a>
</li>
            
<li >
    <a href="../../../idea/memo/">Memo App</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Language</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">Cpp</a>
    <ul class="dropdown-menu">
            
<li class="active">
    <a href="./">New c++11 standard</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Mkdocs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../mkdocs/usage/">HowTo</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Ml</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../ml/MNIST/">MNIST</a>
</li>
            
<li >
    <a href="../../../ml/huber_loss/">Huber loss</a>
</li>
            
<li >
    <a href="../../../ml/linear_regression/">Linear regression</a>
</li>
            
<li >
    <a href="../../../ml/softmax/">Softmax</a>
</li>
            
<li >
    <a href="../../../ml/tensorflow_dataset/">tenserflow data</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Seminar</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../seminar/learn_to_learn/">How to learn to learn?</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Simpleai</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../simpleai/private/">심플AI 개인정보 처리방침</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Kingofcal</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../simpleai/kingofcal/1_intro/">1 intro</a>
</li>
            
<li >
    <a href="../../../simpleai/kingofcal/1_intro_raw/">버전3</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Speaking</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../speaking/toolbox/">대화의 기술</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Vi</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../vi/etc/">Tips</a>
</li>
            
<li >
    <a href="../../../vi/multi_lang/">Multi language</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Framework <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">Grpc</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../framework/grpc/introduction/">Introduction</a>
</li>
            
<li >
    <a href="../../../../framework/grpc/protocolbuffer/">Protocol Buffers</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Http2</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../framework/http2/introduction/">Introduction</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">K8s</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../framework/k8s/0_introduction/">쿠버네티스</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/1_container/">Overview</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/2_k8s/">서비스 소개</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/3_master_node/">마스터, 노드</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/4_objects/">k8s 오브젝트들</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/5_names/">Identifer</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/6_labels/">레이블 그리고 셀렉터</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/7_annotation/">어노테이션</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/8_field_selectors/">필드 셀렉터</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/9_managements/">k8s 객체 관리</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/_10_nodes/">Node</a>
</li>
            
<li >
    <a href="../../../../framework/k8s/_11_master_node_communication/">Master-Node 통신</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Mobile</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../framework/mobile/golssary/">A mobile advertising glossary</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">React</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../framework/react/reactive_introduction/">Introduction to Reactive Programming</a>
</li>
            
<li >
    <a href="../../../../framework/react/reactive_stream_introduction/">Reactive streams</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Spring</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../framework/spring/spring_overview/">Spring overview.</a>
</li>
            
<li >
    <a href="../../../../framework/spring/spring_webflux/">Spring WebFlux.</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Unity</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../framework/unity/key/">Short Cut</a>
</li>
            
  <li class="dropdown-submenu">
    <a href="#">Script</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../../framework/unity/script/built_in_serialization/">Build-in seriallization</a>
</li>
            
<li >
    <a href="../../../../framework/unity/script/script_serialization/">Script Serialization</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Rl <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../../rl/4_rl_introduction/">1. Introduction to Reinforcement Learning</a>
</li>
                                    
<li >
    <a href="../../../../rl/5_rl_exploration/">2. Exploration and Exploitatin</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Unix <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../../unix/regex/">정규 표현식이란?</a>
</li>
                                    
<li >
    <a href="../../../../unix/sed/">Sed</a>
</li>
                                    
<li >
    <a href="../../../../unix/shell_1/">Bourne Shell 1</a>
</li>
                                    
<li >
    <a href="../../../../unix/shell_2/">Bourne Shell 2</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../../../idea/memo/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../../../mkdocs/usage/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#new-c11-standard">New c++11 standard</a></li>
            <li><a href="#new-type">New type</a></li>
            <li><a href="#uniform-initialization">Uniform initialization</a></li>
            <li><a href="#declarations">Declarations</a></li>
            <li><a href="#class-changes">Class Changes</a></li>
            <li><a href="#template-and-stl-changes">Template and STL Changes</a></li>
            <li><a href="#new-stl-methods">New STL Methods</a></li>
            <li><a href="#the-rvalue-reference">The rvalue reference</a></li>
        <li class="main "><a href="#move-semantics-and-the-rvalue-reference">Move Semantics and the Rvalue Reference</a></li>
            <li><a href="#the-need-for-move-semantics">The Need for Move Semantics</a></li>
            <li><a href="#move-constructor-observation">Move Constructor Observation</a></li>
            <li><a href="#assignment">Assignment</a></li>
            <li><a href="#forcing-a-move">Forcing a Move</a></li>
        <li class="main "><a href="#from">From</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="new-c11-standard">New c++11 standard</h1>
<h2 id="new-type">New type</h2>
<p>c++11 adds </p>
<ul>
<li>long long </li>
<li>unsingned long long</li>
<li>char16_t</li>
<li>char32_t</li>
</ul>
<h2 id="uniform-initialization">Uniform initialization</h2>
<p>c++11 extends the applicability of the brace-enclosed list (list initialization)</p>
<pre><code class="cpp">int x = {5};
double y {2.7};
short quar[2] = {1,2}
int * ar = new int [2] {1,2};

class Test {
private:
    int aa;
    int bb;
public:
    Test(int a, int b): aa(a), bb(b) {}
}

Test t1(1,2);
Test t2{1,2};
test t3 = {1,2};
</code></pre>

<h3 id="stdinitializer_list">std::initializer_list</h3>
<p>Can be used as a constructor argument.</p>
<pre><code class="cpp">vector&lt;int&gt; a1(10); // uninitialized vector with 10 elements
vector&lt;int&gt; a2{10}; // initializer-ist a2 has 1 elements set to 10
vecotr&lt;int&gt; a3{1,2,3}; // 3 elements set to 1,2,3
</code></pre>

<p>You can use an initializer_list argument for regular function as well as for constructor</p>
<pre><code class="cpp">#include &lt;initializer_list&gt;
double sum(std::initializer_list&lt;double&gt; li);
int main() 
{
    double total = sum({1,2,3})
}

double sum(std::initializer_list&lt;double&gt; ii)
{
    double tot = 0;
    for (auto p = il.begin(); p != il.end(); p++)
        tot += *p;
    return tot;
}
</code></pre>

<h2 id="declarations">Declarations</h2>
<h3 id="auto">auto</h3>
<p>c++11 strips the keyword auto of its former meaning as a storage class specifier and puts it to use to implement
automatic type deduction, provided that an explicit initializer is given.</p>
<pre><code class="cpp">auto a = 1; // a is type int
auto pta = &amp;a; // pta is type int *
double b(double, int);
...
for(auto p = il.begin(); p != il.end(); p++);
</code></pre>

<h3 id="decltype">decltype</h3>
<p>Create a variable of the type indicated by an expression.</p>
<pre><code class="cpp">// decltype(x) y;
double x;
int n;
decltype(x*n) q; // q same type as x*n, double
decltype(&amp;x) pd; // pd same as &amp;x, double *
//useful in template defininitions
template&lt;typename T, typename U&gt;
void ef(T t, U u)
{
    decltype(T*U) tu;
}
</code></pre>

<h3 id="trailing-return-type">Trailing Return type</h3>
<p>To use combination with decltype</p>
<pre><code class="cpp">double f1(double int);
auto f2(double, int) -&gt; double;

template&lt;typename T, typename U&gt;
auto ef(T t, U u): decltype(T*U)
{
    decltype(T*U) tu;
}

</code></pre>

<h3 id="template-aliases-using">Template Aliases: using =</h3>
<pre><code class="cpp">typedef double newDouble;
using newDouble = double;
template&lt;typename T&gt; using newDoubleArr = std::arrary&lt;T, 12&gt;
</code></pre>

<h3 id="nullptr">nullptr</h3>
<p>The null pointer is a pointer guaranteed not to point to valid data. It's same as pt = 0;</p>
<h3 id="smart-pointers">Smart Pointers</h3>
<ul>
<li>unique_ptr</li>
<li>shared_ptr</li>
<li>weak_ptr</li>
</ul>
<h3 id="scoped-enumerations">Scoped Enumerations</h3>
<p>You can use New1::yes and New2::yes.</p>
<pre><code>enum Old {yes, no};
enum class New1 {yes, no};
enum struct New2 {yes, no};
</code></pre>

<h2 id="class-changes">Class Changes</h2>
<h3 id="explicit-conversion-operators">explicit Conversion Operators</h3>
<p>Introduce the keyword explicit to suppress automatic conversions invoked by one-argument constructor:</p>
<pre><code class="cpp">class Test
{
    Test(int);
    explicit Test(double);
}

Test a, b;
a = 5; // implicit converstion, call Test(int)
b = 0.5 // not allowed
b = Test(0.5) // explicit conversion
</code></pre>

<p>conversion functions can be treated similarly:</p>
<pre><code class="cpp">class Test
{
    operator int() const;
    explicit operator double() const;
}
...
Test a, b;
int n = a; // int-to-Test automatic conversion;
double x= b // not allowrd
x = double(b) // explicit convesrion, allowd
</code></pre>

<h3 id="member-in-class-initialization">Member In-Class Initialization</h3>
<pre><code class="cpp">class Test
{
    int aval = 1;
    int bval = 2;
    int cval = 3;
public:
    Test() {}
    Test(int c): cval(c) {}
    Test(int a, int b, int c): aval(a), bval(b), cval(c) {}
}
</code></pre>

<h2 id="template-and-stl-changes">Template and STL Changes</h2>
<h3 id="range-based-for-loop">Range-based for Loop</h3>
<p>Use range-based for loop, such as the STL containers, that have begin() and end() methods identifying range.</p>
<pre><code class="cpp">double prices[3] =  {1, 2, 3}
for (auto x: prices)
  cout &lt;&lt; x &lt;&lt; endl;
// Modify elements
for (auto &amp; x: prices)
  x = x + 1;
</code></pre>

<h3 id="new-stl-containtes">New STL Containtes</h3>
<ul>
<li><em>forward_list</em>: single linked list.</li>
<li>unorderd_map, set, multimap, multset.</li>
<li>arrary: Can't change the size but it have the begin() and end.</li>
</ul>
<pre><code>std::arrary&lt;int, 3&gt; ar;
</code></pre>

<h2 id="new-stl-methods">New STL Methods</h2>
<h3 id="anglebrackets">AngleBrackets</h3>
<pre><code>std::vector&lt;std::list&lt;int&gt; &gt; // &gt;&gt; not ok befor c++11
std::vector&lt;std::list&lt;int&gt;&gt; // ok in c++11
</code></pre>

<h2 id="the-rvalue-reference">The rvalue reference</h2>
<h4 id="lvalue">lvalue</h4>
<p>is an expression, such as a variable name or dereferenced  pointer, 
that represents data for which the program can obtain an address.
Originally lvalue was one that could appear on the left side of assignment expression,
but the advent of the const modifier allowed for constructs that cannot be assigned but which still addressable;</p>
<h4 id="lvalue-reference">lvalue reference</h4>
<p>is an identifier that can binds an lvalue.</p>
<pre><code>int n;              // lvalue
int * pt = new int; // lvalue
const int b = 101;  // lvalue
int &amp; rn = n;       // lvalue reference
int &amp; rt = *pt;     // lvalue reference
cont int &amp; rb = b;  // lvalue reference
</code></pre>

<h4 id="rvalue">rvalue</h4>
<p>is an values that can appear on the left side of assignment expression 
but for which cannot apply the address operator.
literal constants, expression such as x+y and function return values, 
providing the function dose not a reference</p>
<h4 id="rvalue-reference">rvalue reference</h4>
<p>is identifier that can binds an rvalue;</p>
<pre><code>int x = 10                     // rvalue
int y = 20                     // rvalue
int &amp;&amp; r1 = 13;                // rvalue reference
int &amp;&amp; r2 = x + y;             // rvalue reference. bind the value to which x + y evaluates at that time.
double &amp;&amp; r3 = std::sqrt(2.0); // revalue reference
</code></pre>

<h4 id="reference-declaration">Reference declaration</h4>
<p>Declares a named variable a s a reference, that is, an alias to already-existing object or function.
- &amp; (attr) declarator: Lvalue reference declarator: the declaration S&amp; D; declares D as an lvalue reference to the type determined by decl-specifier-seq S
- &amp;&amp; (attr) declarator: Rvalue reference declarator: the declaration S&amp;&amp; D: declares D as an rvalue reference to the type determined  by decl-specifier-seq S.</p>
<h1 id="move-semantics-and-the-rvalue-reference">Move Semantics and the Rvalue Reference</h1>
<h2 id="the-need-for-move-semantics">The Need for Move Semantics</h2>
<p>Let the compiler know the it needs to do a real copy and when it doesn't.
Compiler modifies code to remove redundant job.</p>
<h4 id="move-semantic">Move Semantic</h4>
<pre><code>vector&lt;string&gt; upper(vecter&lt;string&gt;&amp; vs) 
{
    vector&lt;string&gt; temp;
    //code the store all upper case to temp
    return temp;

}
vector&lt;string&gt; vstr(100);
vector&lt;string&gt; vstr_copy1(vstr);        // #1
vector&lt;string&gt; vstr_copy2(upper(vstr)); // #2
</code></pre>

<h5 id="1">#1</h5>
<p>To make copy of vstr, vstr copy constructor will called.</p>
<h5 id="2">#2</h5>
<ol>
<li>create temp object which is upper case version of vstr.</li>
<li>vstr_copy2 call copy constructor of temp object.</li>
<li>delete temp object.
Step 2 is redundant in this case. It's better the compiler transfer ownership of the data to vstr_copy2.</li>
</ol>
<h5 id="example">Example</h5>
<p>When you move a file from one directory to another: The actual file stays where is is on the hard drive, 
and just the booking is altered.
Somewhat paradoxically move semantic avoids moving the primary data;it just adjusts booking
To implement move semantic, 
we need a way to let the compiler know the it needs to do a real copy and when it doesn't.
Here's where the rvalue reference comes into play.
We can define two constructor. One the regular copy constructor. The other, called move constructor, 
can use an rvalue reference, and it can bind to rvalue arguments, such as return value of upper(vsrt)..
The copy constructor do the usually deep copy, while the move constructor can just adjust booking.
A move constructor may alter its argument, and this implies that an rvalue reference parameter should not be const.</p>
<pre><code>Useless::Useless(Useless&amp;&amp; u): num(u.num) //move constructor
{
    ++ct;
    pt = u.pt; // steal address
    u.pt = nullptr; // give old object nothing in return
    u.num = 0;
    showObj();
    cout &lt;&lt; &quot;move construtor(Useless&amp;&amp; u)&quot; &lt;&lt; endl;
}
</code></pre>

<ul>
<li>Move constructor make new object based on rvalue reference.</li>
<li>Must pilfering original memory assigned by new, because it'll be called twice if it is not done.
<a href="https://github.com/resoliwan/cprimary/blob/master/l18/useless.cpp">code</a></li>
</ul>
<h2 id="move-constructor-observation">Move Constructor Observation</h2>
<pre><code class="cpp">Useless two = one // matches Useless::Useless(const Useless &amp;) = copy constructor
Useless four (one + three) // matched Useless::Useless(const Useless &amp;&amp;) = move constructor
</code></pre>

<h4 id="before-move-constructor">Before Move constructor</h4>
<pre><code class="cpp">Useless four (one + three) // matched Useless::Useless(const Useless &amp;&amp;) = move constructor
</code></pre>

<ol>
<li>Operator+() makes temp1 object.</li>
<li>Expression (temp1) calls copy constructor. According to spec, create new temp2 object, because it is a rvalue not a lvalue.</li>
<li>Copy temp2 to crate four.</li>
<li>delete temp1, temp2</li>
</ol>
<h2 id="assignment">Assignment</h2>
<pre><code class="cpp">Useless &amp; Uesless::operator+(const Useless &amp; f)
{
    if (this == f)
        return *this;
    delete[] pc;
    n = f.n;
    pc = new char[n];
    for (int i = 0; i &lt; n; i++)
        pc[i] = f.pc[i]
    return *this;
}

Useless &amp; Useless::operation=(Useless &amp;&amp; f)  //not a const! because method alter the source object.
{
    if (this == f)
        return *this;
    delete[] pc;
    n = f.n;
    pc = f.pc; // pilfers the source object
    f.n = 0;
    f.pc = nullptr; // only one pointer to point to the data
    return *this;
}
</code></pre>

<h2 id="forcing-a-move">Forcing a Move</h2>
<ul>
<li>You can use std::move() function, If you want to use move constructor and move assignment with lvalue</li>
<li>std::move is same as using the staitc_cast&lt;&gt; operator to case the object to type Type &amp;&amp;.</li>
</ul>
<h1 id="from">From</h1>
<p><a href="https://www.amazon.com/Primer-Plus-6th-Developers-Library/dp/0321776402">C++ Primer Plus (6th Edition)</a></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../../js/base.js" defer></script>
        <script src="../../../../js/mathjax_config.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML" defer></script>
        <script src="https://unpkg.com/mermaid@8.0.0/dist/mermaid.js" defer></script>
        <script src="../../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
